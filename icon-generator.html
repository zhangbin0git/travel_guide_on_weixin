<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TabBar图标生成器</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .icon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .icon-item {
            text-align: center;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        canvas {
            border: 1px solid #ccc;
            margin: 10px 0;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .download-all {
            background: #28a745;
            padding: 15px 30px;
            font-size: 16px;
            margin: 20px 0;
        }
        .download-all:hover {
            background: #1e7e34;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>微信小程序TabBar图标生成器</h1>
        <p>生成符合微信小程序规范的PNG格式TabBar图标（81x81像素）</p>
        
        <button class="download-all" onclick="downloadAllIcons()">下载所有图标</button>
        
        <div class="icon-grid">
            <div class="icon-item">
                <h3>首页图标</h3>
                <canvas id="home" width="81" height="81"></canvas>
                <br>
                <button onclick="downloadIcon('home', 'home.png')">下载普通状态</button>
                <button onclick="downloadIcon('home-active', 'home-active.png')">下载激活状态</button>
            </div>
            
            <div class="icon-item">
                <h3>搜索图标</h3>
                <canvas id="search" width="81" height="81"></canvas>
                <br>
                <button onclick="downloadIcon('search', 'search.png')">下载普通状态</button>
                <button onclick="downloadIcon('search-active', 'search-active.png')">下载激活状态</button>
            </div>
            
            <div class="icon-item">
                <h3>攻略图标</h3>
                <canvas id="guide" width="81" height="81"></canvas>
                <br>
                <button onclick="downloadIcon('guide', 'guide.png')">下载普通状态</button>
                <button onclick="downloadIcon('guide-active', 'guide-active.png')">下载激活状态</button>
            </div>
            
            <div class="icon-item">
                <h3>个人中心图标</h3>
                <canvas id="profile" width="81" height="81"></canvas>
                <br>
                <button onclick="downloadIcon('profile', 'profile.png')">下载普通状态</button>
                <button onclick="downloadIcon('profile-active', 'profile-active.png')">下载激活状态</button>
            </div>
        </div>
    </div>

    <script>
        // 绘制图标函数
        function drawIcon(canvasId, isActive) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            
            // 清空画布
            ctx.clearRect(0, 0, 81, 81);
            
            // 设置颜色
            const color = isActive ? '#ff6b6b' : '#999999';
            
            switch(canvasId) {
                case 'home':
                case 'home-active':
                    drawHomeIcon(ctx, color);
                    break;
                case 'search':
                case 'search-active':
                    drawSearchIcon(ctx, color);
                    break;
                case 'guide':
                case 'guide-active':
                    drawGuideIcon(ctx, color);
                    break;
                case 'profile':
                case 'profile-active':
                    drawProfileIcon(ctx, color);
                    break;
            }
        }
        
        // 绘制房屋图标
        function drawHomeIcon(ctx, color) {
            ctx.fillStyle = color;
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            
            // 屋顶
            ctx.beginPath();
            ctx.moveTo(40.5, 15);
            ctx.lineTo(15, 35);
            ctx.lineTo(66, 35);
            ctx.closePath();
            ctx.fill();
            
            // 房屋主体
            ctx.fillRect(20, 35, 41, 31);
            
            // 门
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(35, 50, 11, 16);
            
            // 窗户
            ctx.fillStyle = color;
            ctx.fillRect(25, 42, 8, 8);
            ctx.fillRect(48, 42, 8, 8);
        }
        
        // 绘制搜索图标
        function drawSearchIcon(ctx, color) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            
            // 放大镜圆圈
            ctx.beginPath();
            ctx.arc(30, 30, 12, 0, 2 * Math.PI);
            ctx.stroke();
            
            // 放大镜手柄
            ctx.beginPath();
            ctx.moveTo(39, 39);
            ctx.lineTo(55, 55);
            ctx.stroke();
        }
        
        // 绘制攻略图标
        function drawGuideIcon(ctx, color) {
            ctx.fillStyle = color;
            
            // 书本主体
            ctx.fillRect(20, 20, 41, 35);
            
            // 书页线条
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 1.5;
            ctx.beginPath();
            ctx.moveTo(25, 28);
            ctx.lineTo(56, 28);
            ctx.moveTo(25, 35);
            ctx.lineTo(56, 35);
            ctx.moveTo(25, 42);
            ctx.lineTo(56, 42);
            ctx.stroke();
            
            // 书签
            ctx.fillStyle = color;
            ctx.fillRect(38, 15, 5, 20);
        }
        
        // 绘制个人中心图标
        function drawProfileIcon(ctx, color) {
            ctx.fillStyle = color;
            
            // 头部圆圈
            ctx.beginPath();
            ctx.arc(40.5, 28, 8, 0, 2 * Math.PI);
            ctx.fill();
            
            // 身体轮廓
            ctx.beginPath();
            ctx.arc(40.5, 50, 15, 0, Math.PI);
            ctx.fill();
        }
        
        // 下载单个图标
        function downloadIcon(canvasId, filename) {
            const isActive = filename.includes('-active');
            drawIcon(canvasId, isActive);
            
            const canvas = document.getElementById(canvasId);
            const link = document.createElement('a');
            link.download = filename;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }
        
        // 下载所有图标
        function downloadAllIcons() {
            const icons = [
                { id: 'home', file: 'home.png', active: false },
                { id: 'home', file: 'home-active.png', active: true },
                { id: 'search', file: 'search.png', active: false },
                { id: 'search', file: 'search-active.png', active: true },
                { id: 'guide', file: 'guide.png', active: false },
                { id: 'guide', file: 'guide-active.png', active: true },
                { id: 'profile', file: 'profile.png', active: false },
                { id: 'profile', file: 'profile-active.png', active: true }
            ];
            
            icons.forEach((icon, index) => {
                setTimeout(() => {
                    drawIcon(icon.id, icon.active);
                    const canvas = document.getElementById(icon.id);
                    const link = document.createElement('a');
                    link.download = icon.file;
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                }, index * 200); // 间隔200ms下载
            });
        }
        
        // 页面加载时绘制所有图标
        window.onload = function() {
            drawIcon('home', false);
            drawIcon('search', false);
            drawIcon('guide', false);
            drawIcon('profile', false);
        };
    </script>
</body>
</html>