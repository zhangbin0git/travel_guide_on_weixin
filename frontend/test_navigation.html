<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯¼èˆªæµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #007aff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .success {
            color: #28a745;
        }
        .error {
            color: #dc3545;
        }
        .info {
            color: #17a2b8;
        }
    </style>
</head>
<body>
    <h1>å¾®ä¿¡å°ç¨‹åºå¯¼èˆªä¿®å¤æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>é—®é¢˜æè¿°</h2>
        <p class="error">
            åŸé”™è¯¯ï¼šnavigateTo:fail can not navigateTo a tabbar page
        </p>
        <p>åŸå› ï¼šä½¿ç”¨navigateToè·³è½¬åˆ°tabBaré¡µé¢ï¼Œå¾®ä¿¡å°ç¨‹åºä¸å…è®¸è¿™ç§æ“ä½œ</p>
    </div>

    <div class="test-section">
        <h2>ä¿®å¤æ–¹æ¡ˆ</h2>
        <ol>
            <li class="success">å°†navigateToæ”¹ä¸ºswitchTabè·³è½¬åˆ°tabBaré¡µé¢</li>
            <li class="success">ç”±äºswitchTabä¸æ”¯æŒURLå‚æ•°ï¼Œä½¿ç”¨æœ¬åœ°å­˜å‚¨ä¼ é€’å‚æ•°</li>
            <li class="success">åœ¨ç›®æ ‡é¡µé¢componentDidMountä¸­è¯»å–æœ¬åœ°å­˜å‚¨çš„å‚æ•°</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>ä¿®å¤çš„è·³è½¬é€»è¾‘</h2>
        <h3>1. æœç´¢åŠŸèƒ½</h3>
        <p class="info">ä¿®å¤å‰ï¼šnavigateToè·³è½¬åˆ°æœç´¢é¡µé¢ï¼ˆé”™è¯¯ï¼‰</p>
        <pre><code>
// ä¿®å¤å‰
Taro.navigateTo({
  url: `/pages/search/index?keyword=${encodeURIComponent(searchKeyword)}`
})
        </code></pre>
        
        <p class="success">ä¿®å¤åï¼šswitchTab + æœ¬åœ°å­˜å‚¨</p>
        <pre><code>
// ä¿®å¤å
Taro.switchTab({
  url: `/pages/search/index`
}).then(() => {
  Taro.setStorageSync('searchKeyword', searchKeyword)
})
        </code></pre>

        <h3>2. ç›®çš„åœ°ç‚¹å‡»</h3>
        <p class="info">ä¿®å¤å‰ï¼šnavigateToè·³è½¬åˆ°æœç´¢é¡µé¢ï¼ˆé”™è¯¯ï¼‰</p>
        <pre><code>
// ä¿®å¤å‰
Taro.navigateTo({
  url: `/pages/search/index?destination=${encodeURIComponent(destination.name)}`
})
        </code></pre>
        
        <p class="success">ä¿®å¤åï¼šswitchTab + æœ¬åœ°å­˜å‚¨</p>
        <pre><code>
// ä¿®å¤å
Taro.switchTab({
  url: `/pages/search/index`
}).then(() => {
  Taro.setStorageSync('searchDestination', destination.name)
})
        </code></pre>

        <h3>3. æ”»ç•¥å¡ç‰‡ç‚¹å‡»</h3>
        <p class="info">ä¿®å¤å‰ï¼šnavigateToè·³è½¬åˆ°æ”»ç•¥é¡µé¢ï¼ˆé”™è¯¯ï¼‰</p>
        <pre><code>
// ä¿®å¤å‰
Taro.navigateTo({
  url: `/pages/guide/index?id=${guide.id}`
})
        </code></pre>
        
        <p class="success">ä¿®å¤åï¼šswitchTab + æœ¬åœ°å­˜å‚¨</p>
        <pre><code>
// ä¿®å¤å
Taro.switchTab({
  url: `/pages/guide/index`
}).then(() => {
  Taro.setStorageSync('guideId', guide.id)
})
        </code></pre>
    </div>

    <div class="test-section">
        <h2>ç›®æ ‡é¡µé¢å‚æ•°æ¥æ”¶</h2>
        <h3>æœç´¢é¡µé¢</h3>
        <pre><code>
componentDidMount() {
  const searchKeyword = Taro.getStorageSync('searchKeyword')
  const searchDestination = Taro.getStorageSync('searchDestination')
  
  if (searchKeyword) {
    this.setState({ value: searchKeyword })
    Taro.removeStorageSync('searchKeyword')
    this.handleSearch(searchKeyword)
  } else if (searchDestination) {
    this.setState({ value: searchDestination })
    Taro.removeStorageSync('searchDestination')
    this.handleSearch(searchDestination)
  }
}
        </code></pre>

        <h3>æ”»ç•¥é¡µé¢</h3>
        <pre><code>
componentDidMount() {
  const guideId = Taro.getStorageSync('guideId')
  
  if (guideId) {
    Taro.removeStorageSync('guideId')
    this.loadGuideDetail(guideId)
  }
}
        </code></pre>
    </div>

    <div class="test-section">
        <h2>ä¿®å¤éªŒè¯</h2>
        <p class="success">âœ… æ‰€æœ‰navigateToè·³è½¬åˆ°tabBaré¡µé¢çš„é—®é¢˜å·²ä¿®å¤</p>
        <p class="success">âœ… å‚æ•°ä¼ é€’é€šè¿‡æœ¬åœ°å­˜å‚¨å®ç°</p>
        <p class="success">âœ… ç›®æ ‡é¡µé¢æ­£ç¡®è¯»å–å‚æ•°</p>
        <p class="info">ğŸ“ æ³¨æ„ï¼šéœ€è¦é‡æ–°ç¼–è¯‘å°ç¨‹åºå¹¶æµ‹è¯•æ‰€æœ‰è·³è½¬åŠŸèƒ½</p>
    </div>
</body>
</html>